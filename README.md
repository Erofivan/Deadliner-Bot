# Deadliner Bot 🤖

Telegram-бот для управления дедлайнами с умными напоминаниями и системой весов важности.

## ✨ Функционал

- 📝 **Создание дедлайнов с весами важности**
  - Числовая шкала от 0 до 10 с цветовыми индикаторами  
  - Автоматический расчет приоритетов на основе времени и важности
  - Умная сортировка по срочности и важности
  - Динамические описания важности (🔥 Критически важно, ⚡ Срочно, etc.)

- 📋 **Управление дедлайнами**
  - Просмотр списка активных дедлайнов
  - Отметка выполненных
  - Удаление ненужных

- ⏰ **Гибкие напоминания**
  - Настраиваемые время и дни уведомлений через меню "🔔 Уведомления"
  - Персонализированное расписание для каждого пользователя  
  - Автоматические уведомления в группы по умолчанию (10:00, 16:00, 20:00)
  - Умное отображение времени до дедлайна
  - Тестирование системы уведомлений

- 👥 **Работа с группами**
  - Общие дедлайны для всей группы
  - Любой участник группы может добавлять и управлять дедлайнами
  - Автоматические уведомления в группу
  - Персонализированное приветствие с названием группы

- 🔑 **Система доступа**
  - Секретный код для получения прав редактирования
  - Безопасное разграничение доступа

- 📤 **Экспорт и совместное использование**
  - Форматированный текстовый экспорт для пересылки
  - Система кодов доступа для обмена дедлайнами между пользователями
  - Генерация и импорт данных через специальные коды

- 🎨 **Настройки отображения**
  - Кастомизация формата показа дедлайнов
  - Настройка отображения времени до дедлайна
  - Персонализация интерфейса

- 📊 **Подробная статистика**
  - Анализ выполненных и активных дедлайнов
  - Статистика по весам важности
  - Отчеты о продуктивности

## 🚀 Быстрый запуск

### 1. Подготовка

```bash
git clone https://github.com/Erofivan/Deadliner-Bot.git
cd Deadliner-Bot
python setup.py
```

### 2. Настройка

Отредактируйте файл `.env`:
```env
BOT_TOKEN=ваш_токен_бота
SECRET_CODE=ваш_секретный_код
```

### 3. Запуск

```bash
python bot.py
```

## 🛠 Получение токена бота

1. Напишите [@BotFather](https://t.me/BotFather) в Telegram
2. Отправьте команду `/newbot`
3. Выберите имя и username для бота
4. Скопируйте полученный токен в `.env` файл

## 📱 Команды бота

### Основные команды
- `/start` - Главное меню с кнопками
- `/help` - Справка по командам и возможностям
- `/add` - Добавить новый дедлайн
- `/list` - Показать список дедлайнов
- `/export` - Экспорт дедлайнов в текстовом формате
- `/code` - Ввести секретный код для получения доступа

### Дополнительные функции (через меню)
- 🔔 **Уведомления** - Настройка времени и дней для напоминаний
- 🔐 **Коды доступа** - Генерация кодов для обмена дедлайнами
- 🔑 **Импорт** - Получение дедлайнов по коду от другого пользователя
- 🎨 **Отображение** - Настройка формата показа дедлайнов
- 📊 **Статистика** - Подробная аналитика ваших дедлайнов

### Команды для групп
- `/start` - Приветствие с названием группы и основные функции
- `/deadlines` - Показать активные дедлайны группы
- Упоминание бота (`@ваш_бот`) - Показать дедлайны группы
- Все стандартные команды работают в контексте группы
- Любой участник может добавлять, редактировать и удалять дедлайны группы

## 🎯 Форматы ввода даты

Бот понимает различные форматы даты:

```
2024-12-31 15:30
31.12.2024 15:30
31/12/2024 15:30
завтра 15:30
послезавтра 10:00
```

## 📊 Веса важности

| Вес | Эмодзи | Описание | Когда использовать |
|-----|--------|----------|-------------------|
| 10 | 🔴 | Критически важно | Экзамены, дедлайны проектов |
| 7-9 | 🟠 | Очень важно | Рабочие задачи, важные встречи |
| 4-6 | 🟡 | Средняя важность | Лабораторные, домашние дела |
| 1-3 | 🔵 | Низкая важность | Хобби, необязательные задачи |
| 0 | ⚪ | Очень низкая важность | Идеи, напоминания |

## 🗂 Структура проекта

```
Deadliner-Bot/
├── bot.py                    # Основной файл бота с логикой обработки
├── database.py               # Работа с SQLite базой данных
├── scheduler.py              # Система уведомлений и напоминаний
├── importance_calculator.py  # Расчет приоритетов и весов важности
├── config.py                # Настройки и конфигурация
├── setup.py                 # Скрипт автоматической установки
├── requirements_clean.txt   # Основные зависимости Python
├── requirements.txt         # Полный список зависимостей
├── .gitignore               # Исключения для Git
├── LICENSE                  # Лицензия MIT
└── README.md               # Документация проекта
```

## 🔧 Зависимости

- `python-telegram-bot>=20.0,<21.0` - Telegram Bot API
- `python-dotenv>=0.19.0,<2.0` - Загрузка переменных окружения
- `APScheduler>=3.9.0,<4.0` - Планировщик задач для уведомлений
- `zoneinfo>=0.2.0,<1.0` - Поддержка часовых поясов (для Python < 3.9)
- `sqlite3` - База данных (встроена в Python)

## 💡 Примеры использования

### Создание дедлайна
1. Отправьте `/add` или нажмите кнопку "📝 Добавить дедлайн"
2. Введите название: `Сдать отчет`
3. Введите описание: `Квартальный отчет по продажам`
4. Введите дату: `завтра 17:00`
5. Укажите важность (0-10): `8` (🟠 Очень важно)

### Работа в группе
1. Добавьте бота в группу (учебную, рабочую или любую другую)
2. Отправьте `/start` - бот поприветствует группу по названию
3. Любой участник группы может:
   - Добавлять дедлайны для всей группы
   - Просматривать общие дедлайны командой `/deadlines`
   - Управлять (редактировать/удалять) любые дедлайны группы
4. Бот присылает уведомления в настроенное время (по умолчанию в группы отправляются в 10:00, 16:00 и 20:00)

### Экспорт дедлайнов
```
🗓 СПИСОК ДЕДЛАЙНОВ
=========================

1. 🔴 Сдать отчет (9/10)
   📅 25.12.2024 17:00 (осталось: 1 д. 7 ч.)
   📄 Квартальный отчет по продажам
   🔥 Критически важно

2. 🟠 Встреча с клиентом (8/10)
   📅 26.12.2024 14:00 (осталось: 2 д. 4 ч.)
   ⚡ Срочно

=========================
Сгенерировано ботом @personal_deadliner_bot
Дата: 24.12.2024 10:30
```

## 🔐 Безопасность

- Все данные хранятся локально в SQLite базе
- Секретный код защищает от несанкционированного доступа
- Логирование всех операций
- Нет передачи данных третьим лицам

## 🐛 Решение проблем

### Бот не запускается
- Проверьте правильность токена в `.env`
- Убедитесь, что установлены все зависимости
- Проверьте права доступа к файлам

### Напоминания не приходят
- Убедитесь, что настроены времена уведомлений (через кнопку "🔔 Уведомления")
- Проверьте корректность дат дедлайнов
- Убедитесь, что пользователь не заблокировал бота
- Проверьте, что планировщик запущен (должно быть в логах)

### Бот не работает в группе
- Убедитесь, что бот добавлен в группу
- Для полного функционала лучше сделать бота администратором
- Используйте команды `/deadlines` или `/start` для активации
- Упоминайте бота (`@имя_бота`) для показа дедлайнов

## 📞 Поддержка

Если у вас возникли вопросы или предложения:
- Создайте Issue в GitHub
- Опишите проблему подробно
- Приложите логи при необходимости

## 📄 Лицензия

MIT License - смотрите файл [LICENSE](LICENSE) для подробностей.

## 🤝 Вклад в проект

Мы приветствуем вклад в развитие проекта!

1. Форкните репозиторий
2. Создайте ветку для новой функции
3. Сделайте коммит изменений
4. Создайте Pull Request

## 🗺 Планы развития

- [ ] Улучшение системы уведомлений с более гибкими интервалами
- [ ] Расширение статистики и аналитики
- [ ] Добавление поддержки файлов и медиа в дедлайны
- [ ] Интеграция с внешними календарями (Google Calendar, Outlook)
- [ ] Веб-интерфейс для управления через браузер
- [ ] API для интеграций с другими сервисами
- [ ] Улучшение системы командной работы
- [ ] Поддержка множественных групп для одного пользователя
